<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="styles3.css">
  <title>Volunteer Form</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <script src="script.js"></script>
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>


</head>
<body>
  <h1 style="text-align: center; margin-top: 20px; font-family: 'Roboto', sans-serif;">
    Volunteer Application
  </h1>
<ul class="progressbar">
  <li class="active">Personal</li>
  <li>Emergency</li>
  <li>Interests/Availability</li>
  <li>Experience</li>
  <li>References</li>
</ul>

<form name="frm"  method="post" action="https://truebooks.teamdesk.net/secure/gateway.aspx?action=WebToRecord&amp;app=93348&amp;table=1558277">
  <input type="hidden" name="retURL" value="https://truebooks.teamdesk.net">

  
  <div class="step-section active">
    <h2>Personal Information</h2>
    <tr>
      <td colspan="8">
        <div class="input-group">
          <input id="f_67289235_ID0ER" name="f_67289235" type="text" maxlength="40" required>
          <label for="f_67289235_ID0ER">Applicant Name*</label>
        </div>
        <div class="input-group address">
          <div class="address-field">
            <input id="f_67289236_ID0E6" name="f_67289236" type="text" maxlength="40" required>
            <label for="f_67289236_ID0E6">Street Address*</label>
          </div>
        
          <div class="address-field">
            <input id="f_67361783_ID0ENB" name="f_67361783" type="text" maxlength="40" required>
            <label for="f_67361783_ID0ENB">City*</label>
          </div>
        
          <div class="address-field">
            <input id="f_67361784_ID0E2B" name="f_67361784" type="text" maxlength="40" required>
            <label for="f_67361784_ID0E2B">State*</label>
          </div>
        
          <div class="address-field">
            <input id="f_67361785_ID0EJC" name="f_67361785" type="text" maxlength="40" required>
            <label for="f_67361785_ID0EJC">Zip Code*</label>
          </div>
        </div>
        
        <div class="input-group">
          <input id="f_67289237_ID0ENB" name="f_67289237" type="tel" maxlength="31" required>
          <label for="f_67289237_ID0ENB">Phone Number*</label>
        </div>
        <div class="input-group">
          <input id="f_67289238_ID0E3B" name="f_67289238" type="email" maxlength="63" required>
          <label for="f_67289238_ID0E3B">E-Mail*</label>
        </div>
        <div class="input-group">
          <input id="f_67289239_ID0ENC" name="f_67289239" type="date" maxlength="30" required>
          <label for="f_67289239_ID0ENC">DOB*</label>
        </div>
        <div style="margin-top: 20px;">
          <label style="color: #222222; margin-bottom: 8px; display: block; font-weight: bold;">Activity Level*</label>
          <ul class="fs-checklist v3-checklist">
            <li><label><input type="radio" name="f_67289324" value="Limited Activity (requires mostly sitting)"> Limited Activity (requires mostly sitting)</label></li>
            <li><label><input type="radio" name="f_67289324" value="Moderately Active (some walking)"> Moderately Active (some walking)</label></li>
            <li><label><input type="radio" name="f_67289324" value="Very Active (capable of walking distances and pushing wheelchairs)"> Very Active (capable of walking distances and pushing wheelchairs)</label></li>
            <li><label><input type="radio" name="f_67289324" value="Other"> Other</label></li>
          </ul>
        </div>
        <div style="margin-top: 20px;">
          <label style="color: #222222; margin-bottom: 8px; display: block; font-weight: bold;">Reliable Transportation*</label>
          <ul class="fs-checklist v3-checklist yesno">
            <li><label><input type="radio" name="f_67289327" value="Yes" checked> Yes</label></li>
            <li><label><input type="radio" name="f_67289327" value="No"> No</label></li>
          </ul>
        </div>
        <div class="input-group">
          <textarea name="f_67309273" placeholder=" " required></textarea>
          <label>Have you ever been convicted, pled no contest, or had deferred prosecution? If yes, explain.*</label>
        </div>
        
        
      </td>
    </tr>
  </div>
  
  
  <div class="step-section">
    <h2>Emergency Contacts</h2>
    <div class="input-group">
      <input id="f_67289240_ID0E3C" name="f_67289240" type="text" maxlength="40" required>
      <label for="f_67289240_ID0E3C">Name</label>
    </div>
  
    <div class="input-group">
      <input id="f_67289241_ID0EKD" name="f_67289241" type="text" maxlength="40" required>
      <label for="f_67289241_ID0EKD">Relationship</label>
    </div>
  
    <div class="input-group">
      <input id="f_67289242_ID0EYD" name="f_67289242" type="tel" maxlength="31" required>
      <label for="f_67289242_ID0EYD">Phone Number</label>
    </div>
  
  </div>
  
  <div class="step-section">
    <h2>Interests/Availability</h2>
    <div style="margin-top: 20px;">
      <label style="font-weight: 600; color: #222222; margin-bottom: 8px; display: block;">Volunteer Work Interests</label>
      <ul class="fs-checklist v3-checklist">
        <li><label><input type="checkbox" name="f_67289333" value="Liaison/Greeter"> Liaison/Greeter</label></li>
        <li><label><input type="checkbox" name="f_67289333" value="Pastoral Services"> Pastoral Services</label></li>
        <li><label><input type="checkbox" name="f_67289333" value="Patient Unit and ER Volunteers"> Patient Unit and ER Volunteers</label></li>
        <li><label><input type="checkbox" name="f_67289333" value="Wound Healing Center"> Wound Healing Center</label></li>
        <li><label><input type="checkbox" name="f_67289333" value="Special Project Volunteer"> Special Project Volunteer</label></li>
        <li><label><input type="checkbox" name="f_67289333" value="Patient Transporter/Escort"> Patient Transporter/Escort</label></li>
        <li><label><input type="checkbox" name="f_67289333" value="Gift Shop/Dietary"> Gift Shop/Dietary</label></li>
        <li><label><input type="checkbox" name="f_67289333" value="Administrative"> Administrative</label></li>
        <li><label><input type="checkbox" name="f_67289333" value="Junior Volunteers (Under Age of 18)"> Junior Volunteers (Under Age of 18)</label></li>
        <li><label><input type="checkbox" name="f_67289333" value="Other"> Other</label></li>
      </ul>
    </div>
  
    <div style="margin-top: 20px;">
      <label style="font-weight: 600; color: #222222; margin-bottom: 8px; display: block;">Work Availability</label>
      <ul class="fs-checklist v3-checklist">
        <li><label><input type="checkbox" name="f_67289335" value="Weekday Mornings (Mon-Fri 8am-12pm)">Weekday Mornings (Mon-Fri 8am-12pm)</label></li>
        <li><label><input type="checkbox" name="f_67289335" value="Weekday Afternoons (Mon-Fri 12pm-4pm)">Weekday Afternoons (Mon-Fri 12pm-4pm)</label></li>
        <li><label><input type="checkbox" name="f_67289335" value="Weekend Mornings (Sat-Sun 8am-12pm)">Weekend Mornings (Sat-Sun 8am-12pm)</label></li>
        <li><label><input type="checkbox" name="f_67289335" value="Weekend Afternoons (Sat-Sun 12pm-4pm)">Weekend Afternoons (Sat-Sun 12pm-4pm)</label></li>
      </ul>
    </div>
  
    <div style="margin-top: 20px;">
      <label style="font-weight: 600; color: #222222; margin-bottom: 8px; display: block;">How did you find out about Harlingen Medical Center's Volunteer Services Program?</label>
      <ul class="fs-checklist v3-checklist">
        <li><label><input type="checkbox" name="f_67289336" value="Community Event / Outreach Meeting">Community Event / Outreach Meeting</label></li>
        <li><label><input type="checkbox" name="f_67289336" value="www.harlingenmedicalcenter.com">www.harlingenmedicalcenter.com</label></li>
        <li><label><input type="checkbox" name="f_67289336" value="Leaflet / Poster">Leaflet / Poster</label></li>
        <li><label><input type="checkbox" name="f_67289336" value="Other">Other</label></li>
      </ul>
    </div>
  </div>

  <div class="step-section">
    <h2>Experience</h2>
  
    <div class="input-group">
      <textarea name="f_67309274" rows="4" placeholder=" " required></textarea>
      <label>Have you ever done any voluntary work before? If yes, please tell us about the experience.</label>
    </div>
  
    <div class="input-group">
      <textarea name="f_67289258" rows="4" placeholder=" " required></textarea>
      <label>Skills or qualities you can use in your voluntary work</label>
    </div>
  
    <div class="input-group">
      <textarea name="f_67309275" rows="4" placeholder=" " required></textarea>
      <label>Do you have any second language skills? If yes, please describe skill level.</label>
    </div>
  </div>
  
  
  <div class="step-section">
    <h2>References</h2>
    <div style="margin-bottom: 20px; font-weight: 600; color: #222222;">First Reference</div>
  
    <div class="input-group">
      <input id="f_67289267_ID0EQBAC" name="f_67289267" type="text" maxlength="40" required>
      <label for="f_67289267_ID0EQBAC">Name</label>
    </div>
    <div class="input-group">
      <input id="f_67289268_ID0E5BAC" name="f_67289268" type="text" maxlength="40" required>
      <label for="f_67289268_ID0E5BAC">Relationship</label>
    </div>
    <div class="input-group">
      <input id="f_67289269_ID0EMCAC" name="f_67289269" type="tel" maxlength="31" required>
      <label for="f_67289269_ID0EMCAC">Phone Number</label>
    </div>
    <div class="input-group">
      <input id="f_67289283_ID0E2CAC" name="f_67289283" type="email" maxlength="63" required>
      <label for="f_67289283_ID0E2CAC">E-Mail</label>
    </div>
  
    <div style="margin: 30px 0 20px; font-weight: 600; color: #222222;">Second Reference</div>
  
    <div class="input-group">
      <input id="f_67289270_ID0EKDAC" name="f_67289270" type="text" maxlength="40" required>
      <label for="f_67289270_ID0EKDAC">Name</label>
    </div>
    <div class="input-group">
      <input id="f_67289271_ID0EYDAC" name="f_67289271" type="text" maxlength="40" required>
      <label for="f_67289271_ID0EYDAC">Relationship</label>
    </div>
    <div class="input-group">
      <input id="f_67289272_ID0EGEAC" name="f_67289272" type="tel" maxlength="31" required>
      <label for="f_67289272_ID0EGEAC">Phone Number</label>
    </div>
    <div class="input-group">
      <input id="f_67289284_ID0EVEAC" name="f_67289284" type="email" maxlength="63" required>
      <label for="f_67289284_ID0EVEAC">E-Mail</label>
    </div>
    
    <div class="input-group" style="display: none;">
      <input id="f_67361887_ID0EKIAC" name="f_67361887" type="text" maxlength="40" style="display:none;">
      <input id="f_67361926_ID0EYIAC" name="f_67361926" type="text" maxlength="40" style="display:none;">
</div>
    
<div class="g-recaptcha"
     data-sitekey="6LcZkpwrAAAAAASAGdTMJo1OkMRlhhtC0o1RzrmP"
     data-callback="enableSubmitButton"
     data-expired-callback="disableSubmitButton">
</div>

  </div>

 

  <div style="margin-top: 20px;">
    <button type="button" onclick="prevStep()">PREVIOUS</button>
    <button type="button" id="nextBtn" disabled onclick="console.log('Next button clicked!'); nextStep();">NEXT</button>


    
    <div id="next-disabled-message" style="margin-top: 10px; color: #b91c1c; font-size: 0.9rem; display: none;">
      Please complete all required fields (*) and use valid formats (e.g., a valid email) to continue.
    </div>
    
  </div>
  
  
  
</form>




<script>
  const steps = document.querySelectorAll('.step-section');
  const progressItems = document.querySelectorAll('.progressbar li');
  const nextBtn = document.getElementById('nextBtn'); // make sure you have this element
  const form = document.querySelector("form[name='frm']");
  const teamdeskSignature = document.getElementById("f_67361887_ID0EKIAC"); // update ID if needed

  let current = 0;

  function showStep(index) {
    steps.forEach((step, i) => step.classList.toggle('active', i === index));
    progressItems.forEach((p, i) => p.classList.toggle('active', i <= index));
    current = index;

    // Disable next button if on last step and CAPTCHA not solved
    if (current === steps.length - 1) {
      const captchaResponse = grecaptcha.getResponse();
      nextBtn.disabled = !captchaResponse.length;
    } else {
      nextBtn.disabled = false; // enable on other steps
    }
  }

  async function nextStep() {
    console.log("Entered nextStep function");
    const inputs = steps[current].querySelectorAll("input[required], select[required], textarea[required]");
    const stepIsValid = Array.from(inputs).every((input) => input.checkValidity());

    if (!stepIsValid) {
      form.reportValidity();
      return;
    }

    // Last step logic
    if (current === steps.length - 1) {
      const captchaResponse = grecaptcha.getResponse();
      if (!captchaResponse.length) {
        alert("Please complete the CAPTCHA.");
        return;
      }

      try {
        const verifyResponse = await fetch("https://zrsbahc7da.execute-api.us-east-2.amazonaws.com/default/captchaValidation", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ token: captchaResponse })
        });

        const verifyData = await verifyResponse.json();

        if (verifyData.success) {
          console.log("✅ CAPTCHA verification passed:", verifyData);

          // Signature modal logic (make sure these functions and variables exist)
          if (!teamdeskSignature.value.trim()) {
            checkAgeAndShowModal();
          } else {
            confirmSignature();
          }

        } else {
          console.error("❌ CAPTCHA verification failed:", verifyData);
          alert("CAPTCHA verification failed. Please try again.");
        }
      } catch (err) {
        console.error("Error verifying CAPTCHA:", err);
      }

    } else {
      current++;
      showStep(current);
    }
  }

  function prevStep() {
    if (current > 0) {
      current--;
      showStep(current);
    }
  }

  showStep(current);
</script>


<div id="signatureModal" style="display: none;">
  <div style="background: white; padding: 20px; max-width: 800px; width: 90%; text-align: center; font-size: 14px; line-height: 25px;">
    <h3>I certify that all information provided is true and complete. I authorize Harlingen Medical Center to contact my references and perform a background check before I begin volunteering. I understand there is no financial compensation and I must complete all orientation requirements, including drug screening, vaccinations, and background checks, before starting.</h3>

    <input type="text" id="typed-signature" placeholder="Type your full name" style="width: 100%; padding: 8px; margin: 10px 0;" />

    <h3 id="guardian-text" style="display: none;">
      I clearly understand the above and give my permission for participation in the Harlingen Medical Center
      Junior Volunteer program.
    </h3>

    <input type="text" id="guardian-signature" placeholder="Guardian full name" style="width: 100%; padding: 8px; margin: 10px 0; display: none;" />

    <div style="margin: 10px 0;">
      <label>
        <input type="checkbox" id="acknowledgment-checkbox" />
        I acknowledge and agree to the above terms.
      </label>
    </div>
    

    <button type="button" onclick="confirmSignature()">Confirm</button>
  </div>
</div>



</body>
</html>
